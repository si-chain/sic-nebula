webpackJsonp([2],{"3/zL":function(t,e,i){"use strict";function n(t,e){var i=this;"object"===(void 0===e?"undefined":r()(e))?Object(l.a)(t,e):"string"==typeof e&&(t.content=e),this.watcher&&this.watcher(),this.watcher=t.$watch("showValue",function(n){n&&e.onShow&&e.onShow(t),!1===n&&e.onHide&&(e.onHide(t),i.watcher&&i.watcher())}),t.showValue=!0}function o(t){var e=this;t.showValue=!1,t.$nextTick(function(){e.watcher&&e.watcher(),e.watcher=null})}var a=i("MVMM"),s=i("hRKE"),r=i.n(s),c=i("mqrw"),l=i("jjE9"),d=void 0;d||(d=function(t){if("undefined"==typeof document)return void console.error("[VUX] Alert plugin cannot be used in ssr.");var e=t.extend(c.a),i=new e({el:document.createElement("div")});return document.body.appendChild(i.$el),i}(a.default));var u={};e.a={show:function(t){return n.call(u,d,t)},hide:function(){return o.call(u,d)}}},"4YfN":function(t,e,i){"use strict";e.__esModule=!0;var n=i("aA9S"),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}},"7PHS":function(t,e,i){e=t.exports=i("UTlt")(!1),e.push([t.i,'\n.imgUploader[data-v-71f630d6] {\n  padding: 0 0 0.5rem 1rem;\n}\n.imgUploader .file-list[data-v-71f630d6] {\n  padding: 10px 0px;\n}\n.imgUploader .file-list[data-v-71f630d6]::after {\n  content: "";\n  display: block;\n  clear: both;\n  visibility: hidden;\n  line-height: 0;\n  height: 0;\n  font-size: 0;\n}\n.imgUploader .file-list .file-item[data-v-71f630d6] {\n  float: left;\n  position: relative;\n  width: 100px;\n  text-align: center;\n}\n.imgUploader .file-list .file-item img[data-v-71f630d6] {\n  width: 80px;\n  height: 80px;\n  border: 1px solid #ececec;\n}\n.imgUploader .file-list .file-item .file-tip[data-v-71f630d6] {\n  width: 5.1rem;\n  position: absolute;\n  left: 0.5rem;\n}\n.imgUploader .file-list .file-item .file-remove[data-v-71f630d6] {\n  position: absolute;\n  right: 12px;\n  top: 4px;\n  width: 14px;\n  height: 14px;\n  color: white;\n  cursor: pointer;\n  line-height: 12px;\n  border-radius: 100%;\n  -webkit-transform: rotate(45deg);\n          transform: rotate(45deg);\n  background: rgba(0, 0, 0, 0.5);\n}\n.imgUploader .file-list .file-item .flie-loading[data-v-71f630d6] {\n  right: 0;\n  top: 1em;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.imgUploader .file-list .file-item .flie-finished[data-v-71f630d6] {\n  right: 0;\n  top: 2em;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.imgUploader .file-list .file-item .flie-error[data-v-71f630d6] {\n  right: 0;\n  top: 1em;\n  color: red;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.imgUploader .file-list .file-item:hover .file-remove[data-v-71f630d6] {\n  display: inline;\n}\n.imgUploader .file-list .file-item .file-name[data-v-71f630d6] {\n  margin: 0;\n  height: 40px;\n  word-break: break-all;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.imgUploader .add[data-v-71f630d6] {\n  width: 80px;\n  height: 80px;\n  margin-left: 10px;\n  float: left;\n  text-align: center;\n  line-height: 80px;\n  font-size: 30px;\n  cursor: pointer;\n  border: 1px dashed #f2f2f2;\n  color: #999;\n  position: relative;\n  background: #f2f2f2;\n}\n.imgUploader .add .fa[data-v-71f630d6] {\n  font-size: 1.4em;\n  color: #7dd2d9;\n}\n.imgUploader .uploadBtn .empty[data-v-71f630d6] {\n  position: absolute;\n  left: 1.2rem;\n  top: 4.7rem;\n  background-color: #01b5ce;\n  color: #fff;\n  font-size: 13px;\n  padding: 0.2em 1em;\n  border-radius: 1.1rem;\n}\ninput[type="file"][data-v-71f630d6] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 80px;\n  height: 80px;\n  border: 1px solid #000;\n  opacity: 0;\n}\n',""])},HzJ8:function(t,e,i){t.exports={default:i("oMO2"),__esModule:!0}},JPQx:function(t,e,i){e=t.exports=i("UTlt")(!1),e.push([t.i,"\n.header-wrap[data-v-6617cd12] {\n  height: 2.2rem;\n}\n.item-input[data-v-6617cd12] {\n  position: relative;\n}\n.btn[data-v-6617cd12] {\n  width: 100%;\n  height: 3em;\n  border-radius: 0.2rem;\n  background-color: green;\n  color: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.label[data-v-6617cd12] {\n  font-size: 18px;\n  line-height: 30px;\n  padding: 10px 15px 0 15px;\n}\n.upload-tip[data-v-6617cd12] {\n  width: 90%;\n  text-align: left;\n  margin: 0 auto;\n  font-size: 12px;\n  line-height: 16px;\n  color: #999;\n}\n",""])},RLc9:function(t,e,i){var n=i("JPQx");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("FIqI")("5ef1c7c0",n,!0,{})},cUE0:function(t,e,i){"use strict";function n(t){i("hFQn")}function o(t){i("RLc9")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("HzJ8"),s=i.n(a),r=i("3cXf"),c=i.n(r),l=i("4YfN"),d=i.n(l),u=i("RX4P"),f=i.n(u),p=i("7AN4"),m=i.n(p),h=i("3/zL"),g=i("ZrYT"),v=i("mqrw"),_=i("sB+r"),x=i("IXui"),w=i("J/QH"),b=i("5CvF"),y=i("4rfY"),k=i("Jp5S"),$=i("HVJf"),S=(d()({},Object($.mapState)({imgStore:function(t){return t.img_upload_cache},imgPaths:function(t){return t.img_paths},imgStatus:function(t){return t.img_status}})),{props:["url"],data:function(){return{files:[],index:0,maxLength:20}},computed:d()({},Object($.mapState)({imgStore:function(t){return t.img_upload_cache},imgPaths:function(t){return t.img_paths},imgStatus:function(t){return t.img_status}})),methods:{selectImgs:function(){for(var t=this,e=this.$refs.file.files,i=0,n=e.length;i<n;i++)!function(i,n){var o={key:t.index++,name:e[i].name,size:e[i].size,file:e[i]},a=new FileReader;a.onload=function(e){t.$set(o,"src",e.target.result)},a.readAsDataURL(e[i]),t.files.push(o)}(i);this.$store.commit("set_img_upload_cache",this.files)},remove:function(t){this.files.splice(t,1),this.$store.commit("set_img_upload_cache",this.files)}},beforeCreate:function(){this.$store.commit("set_img_status","ready")},destroyed:function(){this.$store.commit("set_img_upload_cache",[]),this.$store.commit("set_img_paths",[])},watch:{imgStore:function(){this.imgStore.length<=0&&this.$store.commit("set_img_status","ready")}}}),U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"imgUploader"},[i("div",{staticClass:"file-list"},[t._l(t.imgStore,function(e,n){return i("section",{key:n,staticClass:"file-item draggable-item"},[i("img",{attrs:{src:e.src,alt:"",ondragstart:"return false;"}}),t._v(" "),i("span",{staticClass:"file-remove",on:{click:function(e){t.remove(n)}}},[t._v("+")])])}),t._v(" "),t.imgStore.length<20?i("section",{staticClass:"file-item"},[i("div",{staticClass:"add"},[i("span",[t._v("+")]),t._v(" "),i("input",{ref:"file",attrs:{type:"file",multiple:"",accept:"image/*"},on:{change:t.selectImgs}})])]):t._e()],2)])},I=[],C={render:U,staticRenderFns:I},L=C,O=i("vSla"),M=n,P=O(S,L,!1,M,"data-v-71f630d6",null),z=P.exports,H=i("j5Bg"),j=i("63oI"),F=(k.a,d()({},Object($.mapState)({imgStatus:function(t){return t.img_status},imgPaths:function(t){return t.img_paths}})),v.a,g.a,x.a,j.a,b.a,_.a,w.a,y.a,H.a,{directives:{TransferDom:k.a},data:function(){return{account:"sic.policy",table:"policy",imgs:[],type:1,show:!1,isUnlock:!1,upLoadImg:!1,formData:{entity:"policy",type:"LIHI",version:"1.0.0",body:{file:[]}},files:[],icon:"success",title:this.$t("policy.success"),buttons:[{type:"primary",text:this.$t("policy.look_detail"),onClick:this.keepOn.bind(this)},{type:"default",text:this.$t("policy.back_home"),link:"/"}]}},computed:d()({},Object($.mapState)({imgStatus:function(t){return t.img_status},imgPaths:function(t){return t.img_paths}})),created:function(){"/insurance-policy"===this.$route.path?(this.account="sic.policy",this.type=1):(this.account="sic.claim",this.type=2)},methods:{uploadXHR:function(){var t=new FormData;this.files.map(function(e){t.append("files",e)});var e=new XMLHttpRequest;e.open("post",this.basePath+"/v1/file/uploads",!0);var i=this;e.onload=function(t){200===e.status?i.uploadSuccess(JSON.parse(t.target.response)):(i.upLoadImg=!1,i.show=!0,i.icon="warn",i.title=i.$t("policy.error"),setTimeout(function(){i.$store.commit("set_img_upload_cache",[])},500))},e.send(t)},unlocking:function(t){this.pwd=t,this.upLoadImg=!0,this.uploadXHR()},uploadSuccess:function(t){var e=this,i=this;if(this.isUnlock=!1,200===t.code){var n=void 0;this.$common.getStore("account").map(function(t){t.account===i.$store.state.account&&(n=t)});try{var o=JSON.parse(this.$common.decryptActive(n.encryption,i.pwd)),a=this.$common.decryptActive(o.active,i.pwd);m.a.keyProvider=a;var s=f()(m.a),r={};r.files=t.data.files;var l=s.contract(this.account);try{l.then(function(n){n.upload({id:t.data.id,type:i.type,ossAddr:c()(r),upload_num:t.data.num,producer:o.account},{authorization:o.account}).then(function(t){e.show=!0,e.upLoadImg=!1,e.icon="success",e.title=e.$t("policy.success"),e.$store.commit("set_img_upload_cache",[])}).catch(function(t){e.upLoadImg=!1;var i=JSON.parse(t);h.a.show({title:i.message,icon:"warn",content:i.error.details[0].message})})})}catch(t){alert(t)}}catch(t){this.showModule(),this.upLoadImg=!1,setTimeout(function(){h.a.hide()},3e3)}}else this.show=!0,this.icon="warn",this.title=this.$t("policy.error"),setTimeout(function(){e.$store.commit("set_img_upload_cache",[])},500)},uploadFile:function(){var t=this;this.$store.state.img_upload_cache.length>0?(this.$store.state.img_upload_cache.map(function(e){t.files.push(e.file)}),this.isUnlock=!0):(this.show=!0,this.icon="warn",this.title=this.$t("policy.upload_select"))},showModule:function(){h.a.show({title:this.$t("unlock.error.invalid_password"),icon:"warn",content:"",onShow:function(){console.log("Module: I'm showing")},onHide:function(){console.log("Module: I'm hiding now")}})},submit:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var o,a=s()(this.imgPaths);!(e=(o=a.next()).done);e=!0){var r=o.value;t.push(r)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}this.imgs=t},confirm:function(){this.$store.commit("set_img_upload_cache",[])},keepOn:function(){this.confirm(),this.files=[],this.show=!1,"/insurance-policy"===this.$route.path?this.$store.commit("setIndex",0):this.$store.commit("setIndex",1),this.$router.push("/policy")},setUnlock:function(t){this.isUnlock=t}},watch:{imgStatus:function(){"finished"===this.imgStatus&&this.submit()}},destoryed:function(){this.imgs=[]},components:{upload:z,Alert:v.a,Msg:g.a,XButton:x.a,sicHeader:j.a,Flexbox:b.a,Box:_.a,Loading:w.a,FlexboxItem:y.a,passwordConfirm:H.a}}),J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"insurance-policy"},["sic.policy"===t.account?i("sic-header",{attrs:{"left-options":{backText:""}}},[t._v(t._s(t.$t("policy.tip_insurance_policy")))]):i("sic-header",{attrs:{"left-options":{backText:""}}},[t._v(t._s(t.$t("policy.tip_insurance_claim")))]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"list-block"},[i("ul",[i("li",{staticClass:"align-top"},[i("div",{staticClass:"item-content"},[t._m(0),t._v(" "),i("div",{staticClass:"item-inner"},[i("div",{staticClass:"item-title label"},[t._v(t._s(t.$t("policy.upload_select")))])])]),t._v(" "),i("div",{staticClass:"item-input"},[i("upload")],1)])]),t._v(" "),i("p",{staticClass:"upload-tip"},[t._v(t._s(t.$t("policy.policy_upload_tip_title"))+"："+t._s(t.$t("policy.policy_upload_tip")))])]),t._v(" "),i("box",{attrs:{gap:"10px 15px"}},[i("flexbox",[i("flexbox-item",[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.uploadFile(e)}}},[t._v(t._s(t.$t("index.confirm")))])],1),t._v(" "),i("flexbox-item",[i("x-button",{attrs:{link:"/policy"},nativeOn:{click:function(e){return t.confirm(e)}}},[t._v(t._s(t.$t("index.cancel")))])],1)],1)],1)],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("alert",{attrs:{"button-text":" "},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("msg",{attrs:{slot:"default",title:t.title,buttons:t.buttons,icon:t.icon},slot:"default"})],1)],1),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("loading",{attrs:{show:t.upLoadImg,text:""}})],1),t._v(" "),i("password-confirm",{directives:[{name:"show",rawName:"v-show",value:t.isUnlock,expression:"isUnlock"}],ref:"confirm",attrs:{iShowLock:t.isUnlock},on:{setUnlock:t.setUnlock,unlocking:t.unlocking}})],1)},R=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-media"},[i("i",{staticClass:"icon icon-form-comment"})])}],T={render:J,staticRenderFns:R},A=T,N=i("vSla"),E=o,X=N(F,A,!1,E,"data-v-6617cd12",null);e.default=X.exports},hFQn:function(t,e,i){var n=i("7PHS");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("FIqI")("d0d46b66",n,!0,{})},oMO2:function(t,e,i){i("A1pn"),i("IsPG"),t.exports=i("tcIe")},tcIe:function(t,e,i){var n=i("93K8"),o=i("YW8S");t.exports=i("AKd3").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});