webpackJsonp([19],{Xgcg:function(t,e,o){"use strict";function r(t){o("t25O")}Object.defineProperty(e,"__esModule",{value:!0});var n=o("RX4P"),s=o.n(n),a=o("7AN4"),c=o.n(a),i=o("j5Bg"),u=o("Z2Kc"),l=o("CKVb"),h=o("fvyU"),f=o("sB+r"),m=o("f4gh"),p=o("IXui"),d=o("mqrw"),v=(l.a,h.a,u.a,f.a,m.a,p.a,i.a,d.a,{components:{Group:l.a,XInput:h.a,XHeader:u.a,Box:f.a,Toast:m.a,XButton:p.a,passwordConfirm:i.a,Alert:d.a},data:function(){return{ToAccount:"",amount:"",memo:"",show:!1,showToast:!1,loading:!1,iconType:"",isUnlock:!1,btnTitle:this.$t("transfer.next"),pwd:"",isSuccess:"warn",error:"",validateAccount:function(t){return{valid:/^[.12345a-z]+$/.test(t),msg:this.$t("transfer.error.account.from_account_not_exist")}},validateAmount:function(t){return{valid:t>1e-4,msg:this.$t("transfer.error.amount.minimum")}}}},methods:{setUnlock:function(t){this.isUnlock=t},transferAccount:function(){var t=this,e=this.ToAccount,o=e.length;e?o<1?(this.error=this.$t("wallet_create.one.error.account_should_be_longer"),this.showToast=!0,this.iconType="error"):o>12?(this.error=this.$t("wallet_create.one.error.account_should_be_shorter"),this.showToast=!0,this.iconType="error"):/^[.12345a-z]+$/.test(this.ToAccount)?this.$http.get(this.basePath+"/v1/chain/accounts/eos/"+e).then(function(e){if(200===e.data.code)return t.showToast=!1,t.isAccount=!0,t.iconType="success",!0;t.error=t.$t("wallet_import.error.account_not_found"),t.showToast=!0,t.iconType="error"}).catch(function(e){t.error=t.$t("wallet_create.one.error.query_account_failed"),t.showToast=!0,t.iconType="error"}):(this.error=this.$t("wallet_create.one.error.account_format_error"),this.showToast=!0,this.iconType="error"):(this.error=this.$t("wallet_create.one.error.empty_account"),this.showToast=!0,this.iconType="error")},unlocking:function(t){this.pwd=t,this.loading=!0,this.isUnlock=!1,this.btnTitle=this.$t("transfer.sending"),this.transfer()},transfer:function(){var t=this;if(/^[.12345a-z]+$/.test(this.ToAccount)&&this.amount>1e-4){var e=this;try{var o=void 0;this.$common.getStore("account").map(function(t){t.account===e.$store.state.account&&(o=t)});var r=JSON.parse(this.$common.decryptActive(o.encryption,this.pwd)),n=this.$common.decryptActive(r.active,this.pwd);c.a.keyProvider=n;var a=s()(c.a),i=a.contract("sic.token");try{i.then(function(r){r.transfer({from:o.account,to:e.ToAccount,quantity:Number(e.amount).toFixed(4)+" SIC",memo:e.memo+Date.now()},{authorization:o.account}).then(function(o){e.isSuccess="success",e.show=!0,e.error=e.$t("transfer.success.title"),e.loading=!1,e.btnTitle=e.$t("transfer.success.title"),setTimeout(function(){e.$router.push("/transfer?account="+t.$route.query.account)},500)}).catch(function(t){var o=JSON.parse(t);e.btnTitle=e.$t("transfer.next"),e.loading=!1,e.show=!0,e.isSuccess="warn",e.error=o.error.details[0].message,e.iconType=""})})}catch(t){e.loading=!1,e.show=!0,e.isSuccess="warn",e.error=e.$t("transfer.tip"),e.ToAccount="",e.amount="",e.memo=""}}catch(t){e.loading=!1,e.show=!0,e.isSuccess="warn",e.error=e.$t("unlock.error.invalid_password"),e.btnTitle=e.$t("transfer.next")}}else this.loading=!1,this.show=!0,this.isSuccess="warn",this.error=this.$t("transfer.tip"),this.ToAccount="",this.amount="",this.memo=""},next:function(){this.isUnlock=!0}}}),w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("x-header",{attrs:{"left-options":{backText:""}}},[t._v(t._s(t.$t("transfer.title")))]),t._v(" "),o("group",[o("x-input",{attrs:{title:t.$t("transfer.to"),novalidate:"","icon-type":t.iconType,"label-width":"4.5em",required:"",placeholder:t.$t("transfer.to_placeholder"),"is-type":t.validateAccount},on:{"on-blur":t.transferAccount},model:{value:t.ToAccount,callback:function(e){t.ToAccount=e},expression:"ToAccount"}}),t._v(" "),o("x-input",{attrs:{title:t.$t("transfer.amount"),type:"number","label-width":"4.5em",required:"",placeholder:t.$t("transfer.amount_placeholder"),"is-type":t.validateAmount},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),o("x-input",{attrs:{title:t.$t("transfer.memo"),"label-width":"4.5em",placeholder:t.$t("transfer.memo")},model:{value:t.memo,callback:function(e){t.memo=e},expression:"memo"}})],1),t._v(" "),o("box",{attrs:{gap:"30px 15px"}},[o("x-button",{attrs:{disabled:"error"===t.iconType||""===t.iconType,type:"primary","show-loading":t.loading},nativeOn:{click:function(e){return t.next(e)}}},[t._v(t._s(t.btnTitle))])],1),t._v(" "),o("toast",{attrs:{type:t.isSuccess},model:{value:t.showToast,callback:function(e){t.showToast=e},expression:"showToast"}},[t._v(t._s(t.error))]),t._v(" "),o("alert",{attrs:{title:t.$t("index.notice"),content:t.error},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),t._v(" "),t.isUnlock?o("password-confirm",{ref:"confirm",on:{setUnlock:t.setUnlock,unlocking:t.unlocking}}):t._e()],1)},T=[],_={render:w,staticRenderFns:T},$=_,y=o("vSla"),b=r,g=y(v,$,!1,b,"data-v-4ebe8176",null);e.default=g.exports},t25O:function(t,e,o){var r=o("vfyj");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o("FIqI")("4f5a15c0",r,!0,{})},vfyj:function(t,e,o){e=t.exports=o("UTlt")(!1),e.push([t.i,"",""])}});