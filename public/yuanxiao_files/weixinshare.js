!function(){function e(n){this.opts=$.extend({},e.DEFAULTS,n),this._init()}e.DEFAULTS={title:"",link:"",desc:"",img:""},e.prototype={_init:function(){var n=this.opts;n.link=window.location.href.split("#")[0];var i="",t="",s="",c="";$.ajax({type:"post",url:"http://www.epicc.com.cn/microShop/shareLink/share/link",data:{link:n.link},async:!1,dataType:"json",success:function(n){var e=JSON.parse(n.jsonObjectFromMap);i=e.appid,t=e.timestamp,s=e.nonceStr,c=e.signature,e.token}}),wx.config({debug:!1,appId:i,timestamp:t,nonceStr:s,signature:c,jsApiList:["showOptionMenu","onMenuShareTimeline","onMenuShareAppMessage","hideMenuItems","getLocation"]}),wx.ready(function(){wx.checkJsApi({jsApiList:["showOptionMenu","onMenuShareTimeline","onMenuShareAppMessage","hideMenuItems"],success:function(n){}}),wx.showOptionMenu(),wx.onMenuShareTimeline({title:n.desc,link:n.link,imgUrl:n.img,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:n.title,desc:n.desc,link:n.link,imgUrl:n.img,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:n.title,desc:n.desc,link:n.link,imgUrl:n.img,type:"",dataUrl:"",success:function(){},cancel:function(){}})})}},$.extend({weixinShare:function(n){new e(n)}})}(jQuery);